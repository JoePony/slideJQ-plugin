define(["jquery"],function(t){function i(t,i){var e={initialIndex:1,speed:300,animate:{type:"slide",className:""},aniamtionType:"swing",autoPlay:!0,duration:2500,mouseType:"click mouseover",titleHidden:!1,navHidden:!1,remainNav:!1};this.opts=$.extend({},!0,e,i);var s=this.opts;if(!t)throw new Error("Please specify contaner element");if(this.slideWrap=$(t),!s.slideList)throw new Error("Please specify slide list element");if(this.slideList=$(t).find(s.slideList),this.slideListItems=this.slideList.children(),this.slideListItemsNum=this.slideListItems.length,this.lastIndex=this.slideListItemsNum-1,this.slideItemWidth=this.slideList.children().outerWidth(!0),this.titleList=s.titleList?$(t).find(s.titleList):null,this.titleHidden=s.titleHidden,this.arrowHide=s.arrowHide,this.navHidden=s.navHidden,this.remainNav=s.remainNav,s.navList){if(this.navList=s.navList.ele?$(t).find(s.navList.ele):null,!(this.navList.children().length>0))throw new Error("Need at least one navigation list item");this.navListItems=this.navList.children()}if(this.navList){if(!s.navList.activeClass)throw new Error("Please specify navigation button highlight class name");this.navListItemActiveClass=s.navList.activeClass}if(s.initialIndex>this.slideListItemsNum||s.initialIndex<1)throw new Error("initialIndex:"+this.initialIndex+" over range");this.initialIndex=s.initialIndex-1,this.activeIndex=this.initialIndex,this.aniamtionType=s.aniamtionType,this.arrowPrev=$(t).find(s.arrowPrev),this.arrowNext=$(t).find(s.arrowNext),this.duration=s.duration,this.animateType=s.animate.type,this.animateClassName=s.animate.className?s.animate.className:"",this.speed=s.speed,this.autoPlay=s.autoPlay,this.mouseType=s.mouseType,this.fnInit()}function e(t){var i=t._this,e=t.e,s=void 0!==e.terminalIndex?e.terminalIndex:null,n=(void 0!==e.justMove&&e.justMove,void 0!==e.slideStep?e.slideStep:null);return null!==n&&(s=n>0&&0==i.activeIndex?i.lastIndex:n<0&&i.activeIndex==i.lastIndex?0:i.activeIndex-n),s}i.prototype.fnInit=function(){this.fnBinding(),this.slideListItemsNum>0&&this.fnInitPosition(),this.navList&&this.navListItems&&this.fnCreateNavs(),this.titleList&&this.fnTitleSwitch(),this.autoPlay&&this.fnAutoPlay()},i.prototype.fnCreateNavs=function(){var t=this;if(!t.remainNav){for(var i=document.createDocumentFragment(),e=0,s=t.slideListItemsNum;e<s;e++)t.navListItems.first().clone(!0).removeClass(t.navListItemActiveClass).appendTo(i);t.navList.empty().append(i)}this.fnShowActive({index:this.initialIndex})},i.prototype.fnShowActive=function(){var t=this;t.navList.children()[t.initialIndex].classList.add(t.navListItemActiveClass)},i.prototype.fnAutoPlay=function(){var t=this;t.timer=setTimeout(function(){t.fnAnimate({slideStep:-1}),t.navList&&t.fnNavSwitch(t.activeIndex),t.titleList&&t.fnTitleSwitch(t.activeIndex),t.fnAutoPlay()},t.duration)},i.prototype.fnBinding=function(){var t=this;t.arrowNext.on("click",function(){t.slideList.is(":animated")||(t.fnAnimate({slideStep:-1}),t.navList&&t.fnNavSwitch(t.activeIndex),t.titleList&&t.fnTitleSwitch(t.activeIndex))}),t.arrowPrev.on("click",function(){t.slideList.is(":animated")||(t.fnAnimate({slideStep:1}),t.navList&&t.fnNavSwitch(t.activeIndex),t.titleList&&t.fnTitleSwitch(t.activeIndex))}),t.navList&&t.navList.on(t.mouseType,function(i){for(var e in this.children)if(i.target===this.children[e]&&!i.target.classList.contains(t.navListItemActiveClass)){var s=$(i.target).index();t.activeIndex;t.fnAnimate({justMove:!0,terminalIndex:s}),t.navList&&t.fnNavSwitch(s),t.titleList&&t.fnTitleSwitch(s);break}}),t.slideList[0].addEventListener("touchstart",function(i){t.slideList.is(":animated")||t.fnTouchStart({e:i,ele:this})}),t.slideList[0].addEventListener("touchmove",function(i){t.slideList.is(":animated")||t.fnTouchMove({e:i,ele:this})}),t.slideList[0].addEventListener("touchend",function(i){t.slideList.is(":animated")||t.fnTouchEnd({e:i,ele:this})}),t.autoPlay&&(t.slideWrap.on("mouseenter touchstart touchmove",function(){clearInterval(t.timer)}),t.slideWrap.on("mouseleave touchend",function(){t.fnAutoPlay()})),t.titleHidden&&t.slideWrap.hover(function(){t.titleList.slideDown("fast")},function(){t.titleList.slideUp(0)}),t.navHidden&&t.slideWrap.hover(function(){t.navList.slideDown("fast")},function(){t.navList.slideUp(0)})},i.prototype.fnTitleSwitch=function(t){this.titleList.children().eq(t).stop(!0,!0).fadeIn(300).siblings().hide(0)},i.prototype.fnNavSwitch=function(t){var i=this;i.navList.children().eq(t).siblings().removeClass(i.navListItemActiveClass).end().addClass(i.navListItemActiveClass)},i.prototype.fnAnimate=function(t){var i=this;switch(i.animateType){case"slide":i.fnSlide(t);break;case"carrousel":i.fnSlideCarrousel(t);break;case"fade":case"blur":case"scale":case"rotate":i.fnSlideWithOtherAnimate(t);break;default:i.fnSlideWithDefault(t)}},i.prototype.fnSlideCarrousel=function(t){var i=this,e=(t.data?t.data.slideStep:t.slideStep)>0?"right":"left";i.activeIndex,i.activeIndex,i.lastIndex,!!t.justMove&&t.justMove,void 0!==t.terminalIndex&&t.terminalIndex;"left"==e?i.slideList.animate({right:"+="+i.slideItemWidth},i.speed,function(){$(this).animate({right:"-="+i.slideItemWidth},0).append($(this).children()[0])}):"right"==e&&i.slideList.prepend(i.slideList.children().last()).animate({right:"+="+i.slideItemWidth},0,function(){$(this).animate({right:"-="+i.slideItemWidth},i.speed)})},i.prototype.fnSlide=function(t){var i,e=this,s=t.data?t.data.slideStep:t.slideStep,n=s>0?"right":"left",a=0==e.activeIndex,d=e.activeIndex==e.lastIndex,l=!!t.justMove&&t.justMove,h=void 0!==t.terminalIndex?t.terminalIndex:null;if(l)i=e.slideItemWidth*(h-e.activeIndex),e.slideList.stop(!0,!0).animate({right:"+="+i},e.speed,e.aniamtionType),e.activeIndex=h;else{if(e.slideList.is(":animated"))return;if(i=Math.abs(e.slideItemWidth*s),"left"==n)if(d){o=e.slideList.children().first().clone(!0);e.slideList.append(o).animate({width:"+="+e.slideItemWidth},0).animate({right:"+="+e.slideItemWidth},e.speed,function(){this.removeChild(this.lastElementChild),this.style.right="0px"}).animate({width:"-="+e.slideItemWidth},0),e.activeIndex=0}else e.slideList.animate({right:"+="+i},e.speed),e.activeIndex++;else if("right"==n)if(a){var o=e.slideList.children().last().clone(!0);e.slideList.prepend(o).animate({width:"+="+e.slideItemWidth},0).animate({right:"+="+e.slideItemWidth},0).animate({right:"-="+e.slideItemWidth},e.speed,function(){this.removeChild(this.firstElementChild),this.style.right=e.slideItemWidth*(e.slideListItemsNum-1)+"px"}).animate({width:"-="+e.slideItemWidth},0),e.activeIndex=e.lastIndex}else e.slideList.animate({right:"-="+i},e.speed),e.activeIndex--}},i.prototype.fnTouchStart=function(t){var i=this,e=t.ele,s=t.e;i.touchStartX=s.touches[0].clientX,i.positionRight=parseInt(e.style.right),i.toLeftEdge=0==i.activeIndex,i.toRightEdge=i.activeIndex==i.lastIndex},i.prototype.fnTouchMove=function(t){var i=i||this,e=e||t.ele,s=s||t.e,n=n||s.touches[0],a=a||i.positionRight,d=d||i.touchStartX;n.clientX-d>0?i.toLeftEdge?e.style.right=a-25+"px":e.style.right=a-(n.clientX-d)+"px":i.toRightEdge?e.style.right=a+25+"px":e.style.right=a+(d-n.clientX)+"px",i.touchMovingX=parseInt(e.style.right)-a},i.prototype.fnTouchEnd=function(t){var i,e,s=this,n=t.ele,a=(t.e,s.positionRight);e=(i=s.touchMovingX>0?s.toRightEdge?a:Math.abs(s.touchMovingX)>s.slideItemWidth/2?a+s.slideItemWidth:a:s.toLeftEdge?a:Math.abs(s.touchMovingX)>s.slideItemWidth/2?a-s.slideItemWidth:a)/s.slideItemWidth,s.activeIndex=e,$(n).animate({right:i},100),s.navList&&s.fnNavSwitch(e),s.titleList&&s.fnTitleSwitch(e)},i.prototype.fnSlideWithOtherAnimate=function(t){var i=this,s=e({e:t,_this:i});i.slideList.children().eq(s).show(0).addClass(i.animateClassName).siblings().removeClass(i.animateClassName).hide(0),i.activeIndex=s},i.prototype.fnSlideWithDefault=function(t){var i=this,s=e({e:t,_this:i});i.slideList.children().eq(s).show(0).siblings().hide(0),i.activeIndex=s},i.prototype.fnInitPosition=function(t){var i=this;-1!==["slide","carrousel"].indexOf(i.animateType)&&(i.slideTotalWidth=this.slideItemWidth*(t||this.slideListItemsNum),this.slideList.css({position:"relative",width:i.slideTotalWidth,right:this.slideItemWidth*(t||this.initialIndex)})),-1!==["fade","scale","blur","rotate","default"].indexOf(i.animateType)&&Array.prototype.forEach.call(i.slideList[0].children,function(t){i.slideList[0].children[i.initialIndex]!==t&&(t.style.display="none")}),i.titleList&&(i.titleList.css("position",function(){var t=window.getComputedStyle(this,null).position;return"static"==t?"relative":t}).children().css({position:"absolute",display:"none"}),i.fnTitleSwitch(this.initialIndex)),i.titleHidden&&i.titleList.hide(),i.navHidden&&i.navList.hide()},function(t){t.fn.extend({slideJQ:function(t){return this.each(function(){new i(this,t)}),this}})}(t)});